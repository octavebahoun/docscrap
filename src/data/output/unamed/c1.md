# FastAPI : Un Framework Moderne pour les APIs
=====================================================

## 1. Introduction
---------------

### Pourquoi FastAPI ?

FastAPI est un framework moderne, rapide et performant pour construire des APIs avec Python. Il est conçu pour être facile à utiliser et à apprendre, tout en offrant des performances élevées.

### Contexte d'utilisation réel

FastAPI est utilisé par de nombreuses entreprises, telles que Microsoft, Uber et Netflix, pour construire des APIs robustes et scalables.

### Bénéfices concrets pour le développeur

*   **Performances élevées** : FastAPI est l'un des frameworks Python les plus rapides, grâce à Starlette et Pydantic.
*   **Facilité d'utilisation** : FastAPI est conçu pour être facile à utiliser et à apprendre, avec une syntaxe simple et intuitive.
*   **Robustesse** : FastAPI est conçu pour être robuste et scalable, avec des fonctionnalités telles que la validation des données et la gestion des erreurs.

## 2. Concepts Fondamentaux
-------------------------

### Définition de FastAPI

FastAPI est un framework Python pour construire des APIs web, basé sur les types hints standard de Python.

### Analogie du quotidien

Imaginez que vous construisez une maison. Vous avez besoin d'un plan pour savoir où placer les murs, les fenêtres et les portes. FastAPI est comme un plan pour votre API, il vous aide à organiser vos endpoints, vos données et vos erreurs de manière logique et scalable.

### Exemple de code minimal

```python
# Importer FastAPI
from fastapi import FastAPI

# Créer une instance de FastAPI
app = FastAPI()

# Définir un endpoint
@app.get("/")
def lire():
    # Retourner un message
    return {"message": "Bonjour, monde !"}
```

### Explication ligne par ligne

*   `from fastapi import FastAPI` : Importer la classe `FastAPI` depuis le module `fastapi`.
*   `app = FastAPI()` : Créer une instance de `FastAPI`.
*   `@app.get("/")` : Définir un endpoint GET pour la racine (`"/"`) de l'API.
*   `def lire():` : Définir une fonction pour traiter les requêtes à cet endpoint.
*   `return {"message": "Bonjour, monde !"}` : Retourner un message JSON en réponse.

## 3. Mise en Pratique
----------------------

### Cas d'usage réels et progressifs

*   **Exemple 1 :** Construire une API pour lister des livres.
*   **Exemple 2 :** Ajouter des endpoints pour créer, mettre à jour et supprimer des livres.

### Code commenté avec explications détaillées

```python
# Importer FastAPI et Pydantic
from fastapi import FastAPI
from pydantic import BaseModel

# Créer une instance de FastAPI
app = FastAPI()

# Définir un modèle de données pour les livres
class Livre(BaseModel):
    id: int
    titre: str
    auteur: str

# Définir une liste de livres
livres = [
    {"id": 1, "titre": "Livre 1", "auteur": "Auteur 1"},
    {"id": 2, "titre": "Livre 2", "auteur": "Auteur 2"}
]

# Définir un endpoint pour lister les livres
@app.get("/livres")
def lister_livres():
    return livres

# Définir un endpoint pour créer un livre
@app.post("/livres")
def creer_livre(livre: Livre):
    livres.append(livre.dict())
    return livre

# Définir un endpoint pour mettre à jour un livre
@app.put("/livres/{id}")
def mettre_a_jour_livre(id: int, livre: Livre):
    for i, l in enumerate(livres):
        if l["id"] == id:
            livres[i] = livre.dict()
            return livre
    return {"erreur": "Livre non trouvé"}

# Définir un endpoint pour supprimer un livre
@app.delete("/livres/{id}")
def supprimer_livre(id: int):
    for i, l in enumerate(livres):
        if l["id"] == id:
            del livres[i]
            return {"message": "Livre supprimé"}
    return {"erreur": "Livre non trouvé"}
```

### Points d'attention

*   **Validation des données** : FastAPI utilise Pydantic pour valider les données.
*   **Gestion des erreurs** : FastAPI fournit des mécanismes pour gérer les erreurs.

### Pièges courants à éviter

*   **Ne pas utiliser de données non validées** : Toujours valider les données avant de les utiliser.
*   **Ne pas gérer les erreurs** : Toujours gérer les erreurs pour éviter les problèmes.

## 4. Exercices Pratiques
-------------------------

### Défi 1 : Fondamentaux

Modifier l'exemple de code minimal pour retourner un message en français.

### Défi 2 : Logique

Implémenter un endpoint pour compter le nombre de livres.

### Défi 3 : Mini-projet

Construire une API pour gérer des utilisateurs.

#### Format des exercices

1.  Énoncé avec contexte "métier" (ex: "Tu travailles sur une app de e-commerce...").
2.  Contraintes techniques (ex: "N'utilise pas la méthode .map()").
3.  Solution cachée sous une balise Markdown :

```markdown
<details>
  <summary>Solution</summary>
  <!-- Code solution -->
</details>
```

## 5. Récapitulatif
-----------------

### Liste à puces des points clés à retenir

*   FastAPI est un framework moderne et rapide pour construire des APIs.
*   FastAPI utilise Pydantic pour valider les données.
*   FastAPI fournit des mécanismes pour gérer les erreurs.

### Liens avec d'autres concepts

*   **Pydantic** : Pour la validation des données.
*   **Starlette** : Pour les performances élevées.